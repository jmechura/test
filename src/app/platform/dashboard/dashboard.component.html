<div class="dashboard-container">
  <div class="header-row">
    <div class="header">Přehled transakcí</div>
  </div>

  <div class="filter-container">
    <div class="tabs-row">
      <mss-tabs class="tabs" [items]="filterOptions" (itemChanged)="visibleFilter = $event"></mss-tabs>
      <div class="buttons">
        <mss-button [label]="'Vymazat filtrovaní'" (click)="clearFilter()"></mss-button>
      </div>
    </div>
  </div>

  <div class="filter-container">
    <div class="content" *ngIf="visibleFilter === 'datum'">
      <div class="calendar-select filter-item">
        <span class="label">Od</span>
        <mss-date-picker-input [pickedDate]="fromDate" (pickedDateChange)="changeFromDate($event)"></mss-date-picker-input>
      </div>
      <div class="calendar-select filter-item">
        <span class="label">Do</span>
        <mss-date-picker-input [pickedDate]="toDate" (pickedDateChange)="changeToDate($event)"></mss-date-picker-input>
      </div>
    </div>
    <div class="content column" *ngIf="visibleFilter === 'transakce'">
      <div class="row">
        <mss-select class="filter-item" [options]="codes" [(selectedOption)]="pagination.search.predicateObject.responseCode"
                    *ngIf="codes.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="types" [(selectedOption)]="pagination.search.predicateObject.transactionType"
                    *ngIf="types.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="states" [(selectedOption)]="pagination.search.predicateObject.state"
                    *ngIf="states.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="cardGroupCodes" [(selectedOption)]="pagination.search.predicateObject.cardGroupCode"
                    *ngIf="cardGroupCodes.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="approvalCodes" [(selectedOption)]="pagination.search.predicateObject.approvalCode"
                    *ngIf="approvalCodes.length > 0"></mss-select>
      </div>
      <mss-input [label]="'UUID'" class="filter-item input" [placeholder]="'UUID'"
                 [(value)]="pagination.search.predicateObject.uuid"></mss-input>
      <mss-input [label]="'RRN'" class="filter-item input" [placeholder]="'RRN'"
                 [(value)]="pagination.search.predicateObject.rrn"></mss-input>
    </div>

    <div class="content column" *ngIf="visibleFilter === 'umístění'">
      <div class="row">
        <mss-select class="filter-item" [options]="issuerCodes" [(selectedOption)]="pagination.search.predicateObject.dstStan"
                    *ngIf="issuerCodes.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="merchantCodes" [(selectedOption)]="pagination.search.predicateObject.merchantCode"
                    *ngIf="merchantCodes.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="networkCodes" [(selectedOption)]="pagination.search.predicateObject.networkCode"
                    *ngIf="networkCodes.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="orgUnitCodes" [(selectedOption)]="pagination.search.predicateObject.orgUnitCode"
                    *ngIf="orgUnitCodes.length > 0"></mss-select>
      </div>
    </div>

    <div class="content column" *ngIf="visibleFilter === 'platba'">
      <div class="row">
        <!--cln don't know where to place it-->
        <mss-select class="filter-item" [options]="cln" [(selectedOption)]="pagination.search.predicateObject.cln"
                    *ngIf="cln.length > 0"></mss-select>
        <mss-select class="filter-item" [options]="terminalCodes" [(selectedOption)]="pagination.search.predicateObject.terminalCode"
                    *ngIf="terminalCodes.length > 0"></mss-select>
      </div>
      <mss-input [label]="'Amount'" class="filter-item input" [type]="'number'"
                 [(value)]="pagination.search.predicateObject.amount"></mss-input>
      <mss-input [label]="'Dst Stan'" class="filter-item input" [type]="'number'"
                 [(value)]="pagination.search.predicateObject.dstStan"></mss-input>
      <mss-input [label]="'Specific Symbol'" class="filter-item input" [placeholder]="'Specific Symbol'"
                 [(value)]="pagination.search.predicateObject.specificSymbol"></mss-input>
      <mss-input [label]="'Variable Symbol'" class="filter-item input" [placeholder]="'Variable Symbol'"
                 [(value)]="pagination.search.predicateObject.vs"></mss-input>
    </div>
  </div>

  <div class="search-button">
    <mss-button [label]="'Vyhledat transakce'" (click)="getTransactions()"></mss-button>
  </div>
  <div class="data-table-container">
    <ngx-datatable #table [columns]="columns" (activate)="goToDetail('transaction', $event)" [externalPaging]="true"
                   [count]="tableData ? tableData.totalElements : 0 " [loadingIndicator]="loading"
                   (page)="setPage($event)"
                   [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="48" [limit]="pagination.pagination.number"
                   [rows]="rows">
      <ngx-datatable-column name="UUID">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
          <span class="cell clickable" title="Click to move to the detail." (click)="goToDetail('uuid', value)"> {{value}}</span>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Terminal Date"></ngx-datatable-column>
      <ngx-datatable-column name="Terminal ID">
        <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
          <span class="cell clickable" title="Click to move to the detail." (click)="goToDetail('terminal', value)"> {{value}}</span>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Amount"></ngx-datatable-column>
      <ngx-datatable-column name="State"></ngx-datatable-column>
      <ngx-datatable-column name="Approval Code"></ngx-datatable-column>
      <ngx-datatable-column name="Response Code"></ngx-datatable-column>
      <ngx-datatable-column name="Transaction Code"></ngx-datatable-column>
      <ngx-datatable-column name="Merchant Code"></ngx-datatable-column>
      <ngx-datatable-column name="DST Stan"></ngx-datatable-column>
      <ngx-datatable-column name="RRN"></ngx-datatable-column>
      <ngx-datatable-column name="Variable Symbol"></ngx-datatable-column>
    </ngx-datatable>
    <div class="datatable-select">
      <span class="select-text">Položek na stránku</span>
      <mss-select [options]="rowLimitOptions" [selectedOption]="pagination.pagination.number" (selectedOptionChange)="changeLimit($event)">
      </mss-select>
    </div>
  </div>
</div>
