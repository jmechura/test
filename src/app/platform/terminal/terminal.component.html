<div class="terminal-container">
  <div class="mss-header-row">
    <span class="mss-title">{{'terminals.title' | translate}}</span>
    <mss-button class="mss-action-button" [label]="'terminals.addTerminal' | translate"
                routerLink="/platform/terminal/create" *mssRoleIf="'terminals.create'">
    </mss-button>
  </div>

  <div class="filter-container">
    <div class="filters" [formGroup]="filterForm">
      <mss-select *mssRoleIf="'terminals.networkCodeSelect'"
                  class="filter-item"
                  [options]="networkCodes"
                  [clearAble]="true"
                  [label]="'dictionary.networkCode' | translate"
                  formControlName="networkCode"
                  labelPosition="top"
                  (selectedOptionChange)="networkSelect($event)"></mss-select>
      <mss-select *mssRoleIf="'terminals.merchantCodeSelect'"
                  class="filter-item"
                  [options]="merchantCodes"
                  [clearAble]="true"
                  [label]="'dictionary.merchantCode' | translate"
                  formControlName="merchantCode"
                  labelPosition="top"
                  (selectedOptionChange)="merchantSelect($event)"></mss-select>
      <mss-select *mssRoleIf="'terminals.orgUnitCodeSelect'"
                  class="filter-item"
                  [options]="orgUnitCodes"
                  [clearAble]="true"
                  [label]="'dictionary.orgUnitCode' | translate"
                  formControlName="orgUnitCode"
                  labelPosition="top"></mss-select>
      <mss-input formControlName="code" class="filter-item"
                 [label]="'basic.code' | translate" labelPosition="top">
      </mss-input>
      <mss-input formControlName="name" class="filter-item"
                 [label]="'basic.name' | translate" labelPosition="top">
      </mss-input>
    </div>
    <mss-button class="mss-action-button bottom" [label]="'basic.clearFilter' | translate" (click)="clearFilter()"></mss-button>
  </div>

  <div class="mss-action-button">
    <mss-button [label]="'basic.search' | translate" (click)="getTerminalList()"></mss-button>
  </div>

  <ngx-datatable #table [externalPaging]="true" [loadingIndicator]="loading" [count]="terminalData ? terminalData.totalElements : 0 "
                 [headerHeight]="70" [footerHeight]="50" columnMode="force"
                 [rowHeight]="'auto'" [externalSorting]="true" [limit]="rowLimit"
                 [rows]="terminalRows" [selectionType]="'single'" (select)="onSelect($event)"
                 (page)="setPage($event)" (sort)="getSortedTerminals($event)"
                 [offset]="terminalData ? terminalData.number : 0">
    <ngx-datatable-column [name]="'basic.code' | translate" prop="code" [sortable]="true"></ngx-datatable-column>
    <ngx-datatable-column [name]="'basic.name' | translate" prop="name" [cellClass]="'mss-click-able'"
                          [sortable]="true"></ngx-datatable-column>
    <ngx-datatable-column [name]="'dictionary.networkCode' | translate" prop="networkCode"
                          [sortable]="true" *mssRoleIf="'createEdit.networkCodeSelect'"></ngx-datatable-column>
    <ngx-datatable-column [name]="'dictionary.merchantCode' | translate" prop="merchantCode"
                          [sortable]="true" *mssRoleIf="'createEdit.merchantCodeSelect'"></ngx-datatable-column>
    <ngx-datatable-column [name]="'dictionary.orgUnitCode' | translate" prop="orgUnitCode"
                          [sortable]="true" *mssRoleIf="'createEdit.orgUnitCodeSelect'"></ngx-datatable-column>
    <ngx-datatable-column [name]="'basic.city' | translate" prop="city" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-column [name]="'basic.street' | translate" prop="street" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-column [name]="'basic.zip' | translate" prop="zip" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-column [name]="'dictionary.state' | translate" prop="state" [sortable]="false"></ngx-datatable-column>
    <ngx-datatable-footer>
      <ng-template
        ngx-datatable-footer-template
        let-rowCount="rowCount"
        let-pageSize="pageSize"
        let-curPage="curPage">
        <mss-table-footer
          [page]="curPage"
          [rowsShown]="pageSize"
          [rowCount]="rowCount"
          (rowsShownChange)="changeLimit($event)"
          (changePage)="table.onFooterPage($event)"
          class="d-table-footer">
        </mss-table-footer>
      </ng-template>
    </ngx-datatable-footer>
  </ngx-datatable>
</div>
