<div class="terminal-container mss-view-container">
  <mss-button class="action-button" [label]="'Add terminal'" (click)="switchModal()"></mss-button>
  <ngx-datatable #table [externalPaging]="true" [loadingIndicator]="loading" [count]="terminalData ? terminalData.totalElements : 0 "
                 [offset]="terminalData ? terminalData.number : 0" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                 [rowHeight]="'auto'"
                 [limit]="pagination.pagination.number" [rows]="terminalRows" (page)="setPage($event)">
    <ngx-datatable-column name="Name" prop="name"></ngx-datatable-column>
    <ngx-datatable-column name="Code" prop="code"></ngx-datatable-column>
    <ngx-datatable-column name="Coefficient" prop="coefficient"></ngx-datatable-column>
    <ngx-datatable-column name="Address" prop="address"></ngx-datatable-column>
    <ngx-datatable-column name="State" prop="state"></ngx-datatable-column>
    <ngx-datatable-column name="Edit" [resizeable]="false" [draggable]="false" [sortable]="false">
      <ng-template ngx-datatable-cell-template let-row="row">
        <i class="material-icons click-able" (click)="editing(row)">edit</i>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-row-detail [rowHeight]="300">
      <ng-template let-row="row" ngx-datatable-row-detail-template>
        <div class="detail-row-container">
          <div class="detail-column">
            <mss-input class="detail-shift" [label]="'Name'" [(value)]="editModel.name"></mss-input>
            <mss-input class="detail-shift" [label]="'Street'" [(value)]="editModel.street"></mss-input>
            <mss-input class="detail-shift" [label]="'City'" [(value)]="editModel.city"></mss-input>
            <mss-input [label]="'Zip'" [(value)]="editModel.zip"></mss-input>
          </div>

          <div class="detail-column">
            <mss-toggle class="detail-shift toggle-input" [label]="'State'" [(toggled)]="editToggle"></mss-toggle>
            <mss-input class="detail-shift" [label]="'Region'" [(value)]="editModel.region"></mss-input>
            <mss-input class="detail-shift" [label]="'Note'" [(value)]="editModel.note"></mss-input>
            <mss-button class="edit-button" [label]="'Save'" (click)="saveEditing()" [disabled]="editSaveDisabled()"></mss-button>
          </div>
        </div>
      </ng-template>
    </ngx-datatable-row-detail>
  </ngx-datatable>
</div>

<mss-modal-window [(visible)]="modalShowing">
  <form [formGroup]="newTerminalForm" (ngSubmit)="addTerminal()">
    <div class="terminal-modal-container">
      <div class="close-wrapper" (click)="switchModal()">
        <div class="close">+</div>
      </div>
      <div class="mss-title">New Terminal</div>
      <div class="new-terminal-inputs">
        <div class="modal-column">
          <mss-input class="modal-input" [label]="'Name'" formControlName="name"></mss-input>
          <mss-input class="modal-input" [label]="'Street'" formControlName="street"></mss-input>
          <mss-input class="modal-input" [label]="'City'" formControlName="city"></mss-input>
          <mss-input class="modal-input" [label]="'Zip'" formControlName="zip"></mss-input>
          <mss-input class="modal-input" [label]="'Region'" formControlName="region"></mss-input>
          <mss-input class="modal-input" [label]="'Country'" formControlName="country"></mss-input>
        </div>
        <div class="modal-column">
          <mss-input class="modal-input" [label]="'Code'" formControlName="code"></mss-input>
          <mss-select class="modal-input" [label]="'Network'" [options]="networkCodes" (selectedOptionChange)="networkChanged($event)"
                      formControlName="networkCode"></mss-select>
          <mss-select class="modal-input" [label]="'Merchant'" [options]="merchantCodes" (selectedOptionChange)="merchantChanged($event)"
                      formControlName="merchantId"></mss-select>
          <mss-select class="modal-input" [label]="'ORG Unit'" [options]="orgUnitCodes" formControlName="orgUnitId"></mss-select>
          <mss-input class="modal-input" [type]="'number'" [label]="'Coefficient'" formControlName="coefficient"></mss-input>
          <mss-input class="modal-input" [label]="'Note'" formControlName="note"></mss-input>
          <mss-button [label]="'Add'" [disabled]="newFormInvalid"></mss-button>
        </div>
      </div>
    </div>
  </form>
</mss-modal-window>
